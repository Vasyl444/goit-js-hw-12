{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const markup = function madeMarkup(images) {\n    const galleryItems = [];\n    images.forEach(image => {\n        galleryItems.push(`<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <div class=\"wrapper\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <div class=\"title-wrapper\">\n            <p class=\"title\">Likes<span>${image.likes}</span></p>\n            <p class=\"title\">Views<span>${image.views}</span></p>\n            <p class=\"title\">Comments<span>${image.comments}</span></p>\n            <p class=\"title\">Downloads<span>${image.downloads}</span></p>\n            </div>\n            </div>\n            </a>\n            </li>`);\n        });\n    return galleryItems.join(\"\");\n};","import axios from 'axios';\n//let responsePage = 1;\nconst imageQuantity = 15;\nlet totalPage = 0;\nexport async function fetchImage(valueFromInput, responsePage) {\n  let result = [];\n  console.log(responsePage);\n  const response = await axios.get(`https://pixabay.com/api/?`, {\n    params: {\n      key: '43830110-6528f7a21182a7b65b70041af',\n      q: `${valueFromInput}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: imageQuantity,\n      page: responsePage,\n    }\n    });\n  if (response.status === 200) {\n    totalPage = Math.ceil(response.data.total / imageQuantity);\n    \n    result = result.concat(response.data.hits);\n    if (response.data.hits.length < imageQuantity) {\n      //responsePage = 1;\n      return result;\n    } else {\n      responsePage += 1;\n      return result;\n    }   \n  }\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { markup}  from \"./js/render-functions\";\nimport { fetchImage } from \"./js/pixabay-api\";\nexport const galleryButton = document.querySelector('.gallery-button');\nexport const galleryList = document.querySelector('.gallery-list');\nexport const loader = document.querySelector('.loader');\nconst input = document.querySelector('.search-input');\nconst message = document.querySelector('.message');\n\nlet newGallery = new SimpleLightbox('.gallery a', {\n                        overlayOpacity: 0.8,\n                        captionSelector: 'img',\n                        captionDelay: 250,\n                        captionPosition: 'bottom',\n                        captionsData: \"alt\",\n                        className: 'simple-lightbox',\n                    });\nconst searchForm = document.querySelector('.search-form');\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    let nowPage = 1;\n    message.classList.add('is-hidden');\n    if (input.value.trim() === \"\") {\n        searchForm.reset();\n        return\n    } else {\n        loader.classList.remove('is-hidden');\n        galleryList.innerHTML = \"\";        \n        galleryButton.classList.add('is-hidden');\n        fetchImage(input.value, nowPage)\n            .then(response => {\n                console.log(fetchImage);\n                if (response.length === 0) {\n                    input.value = '';\n                    iziToast.show({\n                        id: null,\n                        class: '.izi-toast',\n                        message: 'Sorry, there are no images matching your search query. Please try again!',\n                        messageColor: '#fff',\n                        messageSize: '14px',\n                        messageLineHeight: '',\n                        backgroundColor: '#EF4040',\n                        theme: 'light',\n                        color: '',\n                        icon: '',\n                        iconText: '',\n                        iconColor: '',\n                        iconUrl: '',\n                        maxWidth: 430,\n                        zindex: null,\n                        layout: 1,\n                        balloon: false,\n                        close: true,\n                        closeOnEscape: false,\n                        closeOnClick: false,\n                        displayMode: 0,\n                        position: 'topRight',\n                        target: '',\n                        targetFirst: true,\n                        timeout: 3000,\n                        rtl: false,\n                        animateInside: true,\n                        drag: true,\n                        pauseOnHover: true,\n                        resetOnHover: false,\n                        progressBar: true,\n                        progressBarColor: '',\n                        progressBarEasing: 'linear',\n                        overlay: false,\n                        overlayClose: false,\n                        overlayColor: 'rgba(0, 0, 0, 0.6)',\n                        transitionIn: 'fadeInUp',\n                        transitionOut: 'fadeOut',\n                        transitionInMobile: 'fadeInUp',\n                        transitionOutMobile: 'fadeOutDown',\n                        buttons: {},\n                        inputs: {},\n                        onOpening: function () { },\n                        onOpened: function () { },\n                        onClosing: function () { },\n                        onClosed: function () { }\n                    });\n                } else if (response.length < 15) {\n                    message.classList.remove('is-hidden');\n                    galleryButton.classList.add('is-hidden');\n                    input.value = '';\n                    searchForm.reset();\n                    galleryList.insertAdjacentHTML('afterbegin', markup(response));\n                    newGallery.refresh();\n                    newGallery.on('open.simplelightbox');\n                    input.value = '';\n                } else {\n                    message.classList.add('is-hidden');\n                    galleryList.insertAdjacentHTML('afterbegin', markup(response));\n                    newGallery.refresh();\n                    newGallery.on('open.simplelightbox');\n                    galleryButton.classList.remove('is-hidden');\n                    galleryButton.addEventListener('click', async () => { \n        loader.classList.remove('is-hidden');\n                        galleryButton.classList.add('is-hidden');\n                        nowPage += 1;\n        fetchImage(input.value, nowPage)\n            .then(response => {\n                console.log(response);\n                if (response.length < 15) {\n                    message.classList.remove('is-hidden');\n                    galleryButton.classList.add('is-hidden');\n                    input.value = '';\n                    searchForm.reset();\n                } else {\n                    galleryList.insertAdjacentHTML('beforeend', markup(response));\n                    newGallery.refresh();\n                    newGallery.on('open.simplelightbox');\n                    galleryButton.classList.remove('is-hidden');\n                }  \n            })\n            .catch(error => { console.error() })\n        .finally(() => {\n                loader.classList.add('is-hidden');\n    })\n    }\n\n)\n                }\n                loader.classList.add('is-hidden');\n                })\n            .catch(error => { console.error() })\n            .finally(() => {\n                //loader.classList.add('is-hidden');\n                //input.value = '';\n                //searchForm.reset();\n    })\n    }   \n    loader.classList.add('is-hidden');\n                //input.value = '';\n               // searchForm.reset();\n});\n/*galleryButton.addEventListener('click', async () => { \n        loader.classList.remove('is-hidden');\n    galleryButton.classList.add('is-hidden');\n        fetchImage(input.value, nowPage)\n            .then(response => {\n                console.log(response);\n                if (response.length < 15) {\n                    message.classList.remove('is-hidden');\n                    galleryButton.classList.add('is-hidden');\n                    input.value = '';\n                    searchForm.reset();\n                } else {\n                    galleryList.insertAdjacentHTML('beforeend', markup(response));\n                    newGallery.refresh();\n                    newGallery.on('open.simplelightbox');\n                    galleryButton.classList.remove('is-hidden');\n                }  \n            })\n            .catch(error => { console.error() })\n        .finally(() => {\n                loader.classList.add('is-hidden');\n    })\n    }\n\n)*/"],"names":["markup","images","galleryItems","image","imageQuantity","fetchImage","valueFromInput","responsePage","result","response","axios","galleryButton","galleryList","loader","input","message","newGallery","SimpleLightbox","searchForm","event","nowPage","iziToast","error"],"mappings":"owBAAO,MAAMA,EAAS,SAAoBC,EAAQ,CAC9C,MAAMC,EAAe,CAAA,EACrB,OAAAD,EAAO,QAAQE,GAAS,CACpBD,EAAa,KAAK;AAAA,4CACkBC,EAAM,aAAa;AAAA;AAAA,8CAEjBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,0CAE1CA,EAAM,KAAK;AAAA,0CACXA,EAAM,KAAK;AAAA,6CACRA,EAAM,QAAQ;AAAA,8CACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,kBAI3C,CAClB,CAAS,EACED,EAAa,KAAK,EAAE,CAC/B,EChBME,EAAgB,GAEf,eAAeC,EAAWC,EAAgBC,EAAc,CAC7D,IAAIC,EAAS,CAAA,EACb,QAAQ,IAAID,CAAY,EACxB,MAAME,EAAW,MAAMC,EAAM,IAAI,4BAA6B,CAC5D,OAAQ,CACN,IAAK,qCACL,EAAG,GAAGJ,CAAc,GACpB,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAMG,CACP,CACL,CAAK,EACH,GAAIE,EAAS,SAAW,IAItB,OAHY,KAAK,KAAKA,EAAS,KAAK,MAAQL,CAAa,EAEzDI,EAASA,EAAO,OAAOC,EAAS,KAAK,IAAI,EACrCA,EAAS,KAAK,KAAK,OAASL,IAI9BG,GAAgB,GACTC,CAGb,CC1BO,MAAMG,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EAChDC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIC,EAAa,IAAIC,EAAe,aAAc,CAC1B,eAAgB,GAChB,gBAAiB,MACjB,aAAc,IACd,gBAAiB,SACjB,aAAc,MACd,UAAW,iBACnC,CAAqB,EACrB,MAAMC,EAAa,SAAS,cAAc,cAAc,EAExDA,EAAW,iBAAiB,SAAU,MAAOC,GAAU,CACnDA,EAAM,eAAc,EACpB,IAAIC,EAAU,EAEd,GADAL,EAAQ,UAAU,IAAI,WAAW,EAC7BD,EAAM,MAAM,KAAI,IAAO,GAAI,CAC3BI,EAAW,MAAK,EAChB,MACR,MACQL,EAAO,UAAU,OAAO,WAAW,EACnCD,EAAY,UAAY,GACxBD,EAAc,UAAU,IAAI,WAAW,EACvCN,EAAWS,EAAM,MAAOM,CAAO,EAC1B,KAAKX,GAAY,CACd,QAAQ,IAAIJ,CAAU,EAClBI,EAAS,SAAW,GACpBK,EAAM,MAAQ,GACdO,EAAS,KAAK,CACV,GAAI,KACJ,MAAO,aACP,QAAS,2EACT,aAAc,OACd,YAAa,OACb,kBAAmB,GACnB,gBAAiB,UACjB,MAAO,QACP,MAAO,GACP,KAAM,GACN,SAAU,GACV,UAAW,GACX,QAAS,GACT,SAAU,IACV,OAAQ,KACR,OAAQ,EACR,QAAS,GACT,MAAO,GACP,cAAe,GACf,aAAc,GACd,YAAa,EACb,SAAU,WACV,OAAQ,GACR,YAAa,GACb,QAAS,IACT,IAAK,GACL,cAAe,GACf,KAAM,GACN,aAAc,GACd,aAAc,GACd,YAAa,GACb,iBAAkB,GAClB,kBAAmB,SACnB,QAAS,GACT,aAAc,GACd,aAAc,qBACd,aAAc,WACd,cAAe,UACf,mBAAoB,WACpB,oBAAqB,cACrB,QAAS,CAAE,EACX,OAAQ,CAAE,EACV,UAAW,UAAY,CAAG,EAC1B,SAAU,UAAY,CAAG,EACzB,UAAW,UAAY,CAAG,EAC1B,SAAU,UAAY,CAAG,CACjD,CAAqB,GACMZ,EAAS,OAAS,IACzBM,EAAQ,UAAU,OAAO,WAAW,EACpCJ,EAAc,UAAU,IAAI,WAAW,EACvCG,EAAM,MAAQ,GACdI,EAAW,MAAK,EAChBN,EAAY,mBAAmB,aAAcZ,EAAOS,CAAQ,CAAC,EAC7DO,EAAW,QAAO,EAClBA,EAAW,GAAG,qBAAqB,EACnCF,EAAM,MAAQ,KAEdC,EAAQ,UAAU,IAAI,WAAW,EACjCH,EAAY,mBAAmB,aAAcZ,EAAOS,CAAQ,CAAC,EAC7DO,EAAW,QAAO,EAClBA,EAAW,GAAG,qBAAqB,EACnCL,EAAc,UAAU,OAAO,WAAW,EAC1CA,EAAc,iBAAiB,QAAS,SAAY,CAChEE,EAAO,UAAU,OAAO,WAAW,EACnBF,EAAc,UAAU,IAAI,WAAW,EACvCS,GAAW,EAC3Bf,EAAWS,EAAM,MAAOM,CAAO,EAC1B,KAAKX,GAAY,CACd,QAAQ,IAAIA,CAAQ,EAChBA,EAAS,OAAS,IAClBM,EAAQ,UAAU,OAAO,WAAW,EACpCJ,EAAc,UAAU,IAAI,WAAW,EACvCG,EAAM,MAAQ,GACdI,EAAW,MAAK,IAEhBN,EAAY,mBAAmB,YAAaZ,EAAOS,CAAQ,CAAC,EAC5DO,EAAW,QAAO,EAClBA,EAAW,GAAG,qBAAqB,EACnCL,EAAc,UAAU,OAAO,WAAW,EAE9D,CAAa,EACA,MAAMW,GAAS,CAAE,QAAQ,MAAO,CAAA,CAAE,EACtC,QAAQ,IAAM,CACPT,EAAO,UAAU,IAAI,WAAW,CAChD,CAAK,CACA,CAEL,GAEgBA,EAAO,UAAU,IAAI,WAAW,CAChD,CAAiB,EACJ,MAAMS,GAAS,CAAE,QAAQ,MAAO,CAAA,CAAE,EAClC,QAAQ,IAAM,CAI3B,CAAK,EAEDT,EAAO,UAAU,IAAI,WAAW,CAGpC,CAAC"}